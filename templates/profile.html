{% extends "layout.html" %}
{% block content %}

<h1>Account Settings</h1>
<p class="subtitle">Manage your personal information and security</p>

<!-- ================= PERSONAL INFO ================= -->
<div class="card" style="max-width:700px;">
  <h3>Personal Information</h3>

  <form method="POST">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <label>Full Name</label>
    <input
      type="text"
      name="name"
      value="{{ user[0] }}"
      required
    >

    <label>Email Address</label>
    <input
      type="email"
      name="email"
      value="{{ user[1] }}"
      required
    >

    <div class="action-row">
      <button type="submit" class="btn btn-primary">
        Save Changes
      </button>
    </div>
  </form>
</div>

<!-- ================= ACCOUNT DETAILS ================= -->
<div class="card" style="max-width:700px; margin-top:24px;">
  <h3>Account Details</h3>

  <p>
    <strong>Account Created:</strong>
    {{ user[2] if user|length > 2 else "—" }}
  </p>

  <p>
    <strong>Total Sessions:</strong>
    {{ total_sessions if total_sessions is defined else "—" }}
  </p>
</div>

<!-- ================= SECURITY / CHANGE PASSWORD ================= -->
<div class="card" style="max-width:700px; margin-top:24px;">
  <h3>Security</h3>
  <p>Update your password to keep your account secure.</p>

  <form method="POST" action="/change-password">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <label>Current Password</label>
    <input
      type="password"
      name="current_password"
      required
    >

    <label>New Password</label>
    <input
      type="password"
      name="new_password"
      required
    >

    <label>Confirm New Password</label>
    <input
      type="password"
      name="confirm_password"
      required
    >

    <div class="action-row">
      <button type="submit" class="btn btn-primary">
        Change Password
      </button>

      <a href="/logout" class="btn">
        Logout
      </a>
    </div>
  </form>
</div>

{% endblock %}
